<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="annot"><span class="hs-comment">{-|
Copyright   : Predictable Network Solutions Ltd., 2024
License     : BSD-3-Clause
Maintainer  : peter.thompson@pnsol.com
Description : Probability measures on the number line.
-}</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html"><span class="hs-identifier">Numeric.Probability.Mixed</span></a></span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Type</span></span><span>
</span><span id="line-11"></span><span>      </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier">Prob</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#dirac"><span class="hs-identifier">dirac</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#uniform"><span class="hs-identifier">uniform</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#support"><span class="hs-identifier">support</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#distribution"><span class="hs-identifier">distribution</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#fromDistribution"><span class="hs-identifier">fromDistribution</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#measure"><span class="hs-identifier">measure</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#fromMeasure"><span class="hs-identifier">fromMeasure</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#unsafeFromMeasure"><span class="hs-identifier">unsafeFromMeasure</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Numerical operations</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#choice"><span class="hs-identifier">choice</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#translate"><span class="hs-identifier">translate</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#convolve"><span class="hs-identifier">convolve</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NFData</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Numeric.Function.Piecewise.html"><span class="hs-identifier">Numeric.Function.Piecewise</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Numeric.Function.Piecewise.html#Piecewise"><span class="hs-identifier">Piecewise</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html"><span class="hs-identifier">Numeric.Measure.Finite.Mixed</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html#Measure"><span class="hs-identifier">Measure</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Numeric.Polynomial.Simple.html"><span class="hs-identifier">Numeric.Polynomial.Simple</span></a></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Numeric.Polynomial.Simple.html#Poly"><span class="hs-identifier">Poly</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html"><span class="hs-identifier">Numeric.Measure.Finite.Mixed</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-comment">{-----------------------------------------------------------------------------
    Type
------------------------------------------------------------------------------}</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- | A</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- [probability measure](https://en.wikipedia.org/wiki/Probability_measure)</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- on the number line.</span><span>
</span><span id="line-48"></span><span class="hs-comment">--</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- A probability measure is a 'M.Measure' whose 'M.total' is @1@.</span><span>
</span><span id="line-50"></span><span class="hs-keyword">newtype</span><span> </span><span id="Prob"><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span></span><span> </span><span id="local-6989586621679063508"><span class="annot"><a href="#local-6989586621679063508"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Prob"><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html#Measure"><span class="hs-identifier hs-type">Measure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063508"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-comment">-- INVARIANT: 'M.isPositive' equals 'True'.</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-comment">-- INVARIANT: 'M.total' equals 1</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063558"><span id="local-6989586621679063564"><span id="local-6989586621679063568"><span class="annot"><span class="annottext">Int -&gt; Prob a -&gt; ShowS
[Prob a] -&gt; ShowS
Prob a -&gt; String
(Int -&gt; Prob a -&gt; ShowS)
-&gt; (Prob a -&gt; String) -&gt; ([Prob a] -&gt; ShowS) -&gt; Show (Prob a)
forall a. Show a =&gt; Int -&gt; Prob a -&gt; ShowS
forall a. Show a =&gt; [Prob a] -&gt; ShowS
forall a. Show a =&gt; Prob a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; Prob a -&gt; ShowS
showsPrec :: Int -&gt; Prob a -&gt; ShowS
$cshow :: forall a. Show a =&gt; Prob a -&gt; String
show :: Prob a -&gt; String
$cshowList :: forall a. Show a =&gt; [Prob a] -&gt; ShowS
showList :: [Prob a] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063574"><span class="annot"><span class="annottext">Prob a -&gt; ()
(Prob a -&gt; ()) -&gt; NFData (Prob a)
forall a. NFData a =&gt; Prob a -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: forall a. NFData a =&gt; Prob a -&gt; ()
rnf :: Prob a -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="annot"><span class="hs-comment">-- | View the probability measure as a 'M.Measure'.</span></span><span>
</span><span id="line-56"></span><span id="local-6989586621679063495"><span class="annot"><a href="Numeric.Probability.Mixed.html#measure"><span class="hs-identifier hs-type">measure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063495"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063495"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063495"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html#Measure"><span class="hs-identifier hs-type">Measure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063495"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-57"></span><span id="measure"><span class="annot"><span class="annottext">measure :: forall a. (Ord a, Num a) =&gt; Prob a -&gt; Measure a
</span><a href="Numeric.Probability.Mixed.html#measure"><span class="hs-identifier hs-var hs-var">measure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063583"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063583"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063583"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | View a 'M.Measure' as a probability distribution.</span><span>
</span><span id="line-60"></span><span class="hs-comment">--</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- The measure @m@ must be positive, with total weight @1@, that is</span><span>
</span><span id="line-62"></span><span class="hs-comment">--</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- &gt; isPositive m == True</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- &gt; total m == 1</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- These preconditions are checked and the function returns 'Nothing'</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- if they fail. </span><span>
</span><span id="line-68"></span><span id="local-6989586621679063497"><span class="annot"><a href="Numeric.Probability.Mixed.html#fromMeasure"><span class="hs-identifier hs-type">fromMeasure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063497"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063497"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063497"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html#Measure"><span class="hs-identifier hs-type">Measure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063497"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063497"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-69"></span><span id="fromMeasure"><span class="annot"><span class="annottext">fromMeasure :: forall a.
(Ord a, Num a, Fractional a) =&gt;
Measure a -&gt; Maybe (Prob a)
</span><a href="Numeric.Probability.Mixed.html#fromMeasure"><span class="hs-identifier hs-var hs-var">fromMeasure</span></a></span></span><span> </span><span id="local-6989586621679063596"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Bool
forall a. (Ord a, Num a, Fractional a) =&gt; Measure a -&gt; Bool
</span><a href="Numeric.Measure.Finite.Mixed.html#isPositive"><span class="hs-identifier hs-var">M.isPositive</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; a
forall a. (Ord a, Num a) =&gt; Measure a -&gt; a
</span><a href="Numeric.Measure.Finite.Mixed.html#total"><span class="hs-identifier hs-var">M.total</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prob a -&gt; Maybe (Prob a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Prob a -&gt; Maybe (Prob a)) -&gt; Prob a -&gt; Maybe (Prob a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Prob a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-comment">-- | View a 'M.Measure' as a probability distribution.</span><span>
</span><span id="line-74"></span><span class="hs-comment">--</span><span>
</span><span id="line-75"></span><span class="hs-comment">-- Variant of 'fromMeasure' where /the precondition are not checked!/</span><span>
</span><span id="line-76"></span><span id="local-6989586621679063599"><span class="annot"><a href="Numeric.Probability.Mixed.html#unsafeFromMeasure"><span class="hs-identifier hs-type">unsafeFromMeasure</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Numeric.Measure.Finite.Mixed.html#Measure"><span class="hs-identifier hs-type">Measure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063599"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063599"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-77"></span><span id="unsafeFromMeasure"><span class="annot"><span class="annottext">unsafeFromMeasure :: forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#unsafeFromMeasure"><span class="hs-identifier hs-var hs-var">unsafeFromMeasure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | @eval (distribution m) x@ is the probability of picking a number @&lt;= x@.</span><span>
</span><span id="line-80"></span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span class="hs-comment">-- This is known as the</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- [cumulative distribution function</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- ](https://en.wikipedia.org/wiki/Cumulative_distribution_function).</span><span>
</span><span id="line-84"></span><span id="local-6989586621679063510"><span class="annot"><a href="Numeric.Probability.Mixed.html#distribution"><span class="hs-identifier hs-type">distribution</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063510"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063510"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063510"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Function.Piecewise.html#Piecewise"><span class="hs-identifier hs-type">Piecewise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Polynomial.Simple.html#Poly"><span class="hs-identifier hs-type">Poly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063510"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-85"></span><span id="distribution"><span class="annot"><span class="annottext">distribution :: forall a. (Ord a, Num a) =&gt; Prob a -&gt; Piecewise (Poly a)
</span><a href="Numeric.Probability.Mixed.html#distribution"><span class="hs-identifier hs-var hs-var">distribution</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063604"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063604"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Piecewise (Poly a)
forall a. (Ord a, Num a) =&gt; Measure a -&gt; Piecewise (Poly a)
</span><a href="Numeric.Measure.Finite.Mixed.html#distribution"><span class="hs-identifier hs-var">M.distribution</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063604"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- | Construct a probability distribution from its</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- [cumulative distribution function</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- ](https://en.wikipedia.org/wiki/Cumulative_distribution_function).</span><span>
</span><span id="line-90"></span><span class="hs-comment">--</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- Return 'Nothing' if</span><span>
</span><span id="line-92"></span><span class="hs-comment">-- * the cumulative distribution function is not monotonicall increasing</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- * the last piece of the piecewise function is not a constant</span><span>
</span><span id="line-94"></span><span class="hs-comment">--   equal to @1@.</span><span>
</span><span id="line-95"></span><span id="local-6989586621679063515"><span class="annot"><a href="Numeric.Probability.Mixed.html#fromDistribution"><span class="hs-identifier hs-type">fromDistribution</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Function.Piecewise.html#Piecewise"><span class="hs-identifier hs-type">Piecewise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Polynomial.Simple.html#Poly"><span class="hs-identifier hs-type">Poly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063515"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-98"></span><span id="fromDistribution"><span class="annot"><span class="annottext">fromDistribution :: forall a.
(Ord a, Num a, Fractional a) =&gt;
Piecewise (Poly a) -&gt; Maybe (Prob a)
</span><a href="Numeric.Probability.Mixed.html#fromDistribution"><span class="hs-identifier hs-var hs-var">fromDistribution</span></a></span></span><span> </span><span id="local-6989586621679063614"><span class="annot"><span class="annottext">Piecewise (Poly a)
</span><a href="#local-6989586621679063614"><span class="hs-identifier hs-var">pieces</span></a></span></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679063615"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063615"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Piecewise (Poly a) -&gt; Maybe (Measure a)
forall a. (Ord a, Num a) =&gt; Piecewise (Poly a) -&gt; Maybe (Measure a)
</span><a href="Numeric.Measure.Finite.Mixed.html#fromDistribution"><span class="hs-identifier hs-var">M.fromDistribution</span></a></span><span> </span><span class="annot"><span class="annottext">Piecewise (Poly a)
</span><a href="#local-6989586621679063614"><span class="hs-identifier hs-var">pieces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Maybe (Prob a)
forall a.
(Ord a, Num a, Fractional a) =&gt;
Measure a -&gt; Maybe (Prob a)
</span><a href="Numeric.Probability.Mixed.html#fromMeasure"><span class="hs-identifier hs-var">fromMeasure</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063615"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Prob a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Two probability measures are equal if they have the same cumulative</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- distribution functions.</span><span>
</span><span id="line-104"></span><span class="hs-comment">--</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- &gt; px == py</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- &gt;   implies</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- &gt;   forall t. eval (distribution px) t = eval (distribution py) t</span><span>
</span><span id="line-108"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679063519"><span id="local-6989586621679063621"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063519"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063519"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063519"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063627"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063627"><span class="hs-identifier hs-var">mx</span></a></span></span><span> </span><span id="local-6989586621679063628"><span class="annot"><span class="annottext">== :: Prob a -&gt; Prob a -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063629"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063629"><span class="hs-identifier hs-var">my</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063627"><span class="hs-identifier hs-var">mx</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Measure a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063629"><span class="hs-identifier hs-var">my</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">{-----------------------------------------------------------------------------
    Operations
------------------------------------------------------------------------------}</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- | A</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- [Dirac measure](https://en.wikipedia.org/wiki/Dirac_measure)</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- at the given point @x@.</span><span>
</span><span id="line-117"></span><span class="hs-comment">--</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- @dirac x@ is the probability distribution where @x@ occurs with certainty.</span><span>
</span><span id="line-119"></span><span id="local-6989586621679063521"><span class="annot"><a href="Numeric.Probability.Mixed.html#dirac"><span class="hs-identifier hs-type">dirac</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063521"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063521"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-120"></span><span id="dirac"><span class="annot"><span class="annottext">dirac :: forall a. (Ord a, Num a) =&gt; a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#dirac"><span class="hs-identifier hs-var hs-var">dirac</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">(Measure a -&gt; Prob a) -&gt; (a -&gt; Measure a) -&gt; a -&gt; Prob a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Measure a
forall a. (Ord a, Num a) =&gt; a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#dirac"><span class="hs-identifier hs-var">M.dirac</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><span class="hs-comment">-- | The uniform probability distribution on the interval \( [x,y) \).</span></span><span>
</span><span id="line-123"></span><span id="local-6989586621679063527"><span class="annot"><a href="Numeric.Probability.Mixed.html#uniform"><span class="hs-identifier hs-type">uniform</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063527"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-124"></span><span id="uniform"><span class="annot"><span class="annottext">uniform :: forall a. (Ord a, Num a, Fractional a) =&gt; a -&gt; a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#uniform"><span class="hs-identifier hs-var hs-var">uniform</span></a></span></span><span> </span><span id="local-6989586621679063642"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063642"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679063643"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063643"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">(Measure a -&gt; Prob a) -&gt; Measure a -&gt; Prob a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Measure a
forall a. (Ord a, Num a, Fractional a) =&gt; a -&gt; a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#uniform"><span class="hs-identifier hs-var">M.uniform</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063642"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063643"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- | The 'support' is the smallest closed, contiguous interval \( [x,y] \)</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- outside of which the probability is zero.</span><span>
</span><span id="line-128"></span><span class="hs-comment">--</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- Returns 'Nothing' if the interval is empty.</span><span>
</span><span id="line-130"></span><span id="local-6989586621679063530"><span class="annot"><a href="Numeric.Probability.Mixed.html#support"><span class="hs-identifier hs-type">support</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063530"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063530"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063530"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063530"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679063530"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-131"></span><span id="support"><span class="annot"><span class="annottext">support :: forall a. (Ord a, Num a) =&gt; Prob a -&gt; Maybe (a, a)
</span><a href="Numeric.Probability.Mixed.html#support"><span class="hs-identifier hs-var hs-var">support</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063649"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063649"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Maybe (a, a)
forall a. (Ord a, Num a) =&gt; Measure a -&gt; Maybe (a, a)
</span><a href="Numeric.Measure.Finite.Mixed.html#support"><span class="hs-identifier hs-var">M.support</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063649"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">{-----------------------------------------------------------------------------
    Operations
------------------------------------------------------------------------------}</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- | Left-biased random choice.</span><span>
</span><span id="line-137"></span><span class="hs-comment">--</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- @choice p@ is a probability distribution where</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- events from the left argument are chosen with probablity @p@</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- and events from the right argument are chosen with probability @(1-p)@.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- &gt; eval (distribution (choice p mx my)) z</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- &gt;    = p * eval (distribution mx) z + (1-p) * eval (distribution my) z</span><span>
</span><span id="line-144"></span><span id="local-6989586621679063533"><span class="annot"><a href="Numeric.Probability.Mixed.html#choice"><span class="hs-identifier hs-type">choice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063533"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-145"></span><span id="choice"><span class="annot"><span class="annottext">choice :: forall a.
(Ord a, Num a, Fractional a) =&gt;
a -&gt; Prob a -&gt; Prob a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#choice"><span class="hs-identifier hs-var hs-var">choice</span></a></span></span><span> </span><span id="local-6989586621679063662"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063662"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063663"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063663"><span class="hs-identifier hs-var">mx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063664"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063664"><span class="hs-identifier hs-var">my</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">(Measure a -&gt; Prob a) -&gt; Measure a -&gt; Prob a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="annottext">Measure a -&gt; Measure a -&gt; Measure a
forall a. (Ord a, Num a) =&gt; Measure a -&gt; Measure a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#add"><span class="hs-identifier hs-var">M.add</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Measure a -&gt; Measure a
forall a. (Ord a, Num a) =&gt; a -&gt; Measure a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#scale"><span class="hs-identifier hs-var">M.scale</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063662"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063663"><span class="hs-identifier hs-var">mx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Measure a -&gt; Measure a
forall a. (Ord a, Num a) =&gt; a -&gt; Measure a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#scale"><span class="hs-identifier hs-var">M.scale</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063662"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063664"><span class="hs-identifier hs-var">my</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- | Translate a probability distribution along the number line.</span><span>
</span><span id="line-149"></span><span class="hs-comment">--</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- &gt; eval (distribution (translate y m)) x</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- &gt;    = eval (distribution m) (x - y)</span><span>
</span><span id="line-152"></span><span id="local-6989586621679063537"><span class="annot"><a href="Numeric.Probability.Mixed.html#translate"><span class="hs-identifier hs-type">translate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063537"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-153"></span><span id="translate"><span class="annot"><span class="annottext">translate :: forall a. (Ord a, Num a, Fractional a) =&gt; a -&gt; Prob a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#translate"><span class="hs-identifier hs-var hs-var">translate</span></a></span></span><span> </span><span id="local-6989586621679063673"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063673"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063674"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063674"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">(Measure a -&gt; Prob a) -&gt; Measure a -&gt; Prob a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Measure a -&gt; Measure a
forall a.
(Ord a, Num a, Fractional a) =&gt;
a -&gt; Measure a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#translate"><span class="hs-identifier hs-var">M.translate</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679063673"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063674"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-comment">-- | Additive convolution of two probability measures.</span><span>
</span><span id="line-156"></span><span class="hs-comment">--</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- Properties:</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- &gt; convolve (dirac x) (dirac y) = dirac (x + y)</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- &gt; convolve mx my               =  convolve my mx</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- &gt; translate z (convolve mx my) =  convolve (translate z mx) my</span><span>
</span><span id="line-163"></span><span id="local-6989586621679063540"><span class="annot"><a href="Numeric.Probability.Mixed.html#convolve"><span class="hs-identifier hs-type">convolve</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Fractional</span></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063540"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-166"></span><span id="convolve"><span class="annot"><span class="annottext">convolve :: forall a.
(Ord a, Num a, Fractional a) =&gt;
Prob a -&gt; Prob a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#convolve"><span class="hs-identifier hs-var hs-var">convolve</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063682"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063682"><span class="hs-identifier hs-var">mx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-type">Prob</span></a></span><span> </span><span id="local-6989586621679063683"><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063683"><span class="hs-identifier hs-var">my</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Prob a
forall a. Measure a -&gt; Prob a
</span><a href="Numeric.Probability.Mixed.html#Prob"><span class="hs-identifier hs-var">Prob</span></a></span><span> </span><span class="annot"><span class="annottext">(Measure a -&gt; Prob a) -&gt; Measure a -&gt; Prob a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Measure a -&gt; Measure a -&gt; Measure a
forall a.
(Ord a, Num a, Fractional a) =&gt;
Measure a -&gt; Measure a -&gt; Measure a
</span><a href="Numeric.Measure.Finite.Mixed.html#convolve"><span class="hs-identifier hs-var">M.convolve</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063682"><span class="hs-identifier hs-var">mx</span></a></span><span> </span><span class="annot"><span class="annottext">Measure a
</span><a href="#local-6989586621679063683"><span class="hs-identifier hs-var">my</span></a></span><span>
</span><span id="line-167"></span></pre></body></html>