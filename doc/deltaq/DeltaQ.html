<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>DeltaQ</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">deltaq-1.1.0.0: Framework for &#8710;Q System Development</span><ul class="links" id="page-menu"><li><a href="src/DeltaQ.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Predictable Network Solutions Ltd. 2003-2024</td></tr><tr><th>License</th><td>BSD-3-Clause</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">DeltaQ</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Example</a></li><li><a href="#g:2">Modules</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module brings data types and functions
for &#8710;Q System Development into scope.</p><p>Specifically,</p><ul><li><p>type classes in <a href="DeltaQ-Class.html">DeltaQ.Class</a></p><ul><li><code><a href="DeltaQ-Class.html#t:Outcome" title="DeltaQ.Class">Outcome</a></code> for outcomes and their sequential and parallel composition</li><li><code><a href="DeltaQ-Class.html#t:ProbabilisticOutcome" title="DeltaQ.Class">ProbabilisticOutcome</a></code> for probabilistic composition of outcomes</li><li><code><a href="DeltaQ-Class.html#t:DeltaQ" title="DeltaQ.Class">DeltaQ</a></code> for probability distribution of completion times</li></ul></li><li><p>type class instance in <a href="DeltaQ-PiecewisePolynomial.html">DeltaQ.PiecewisePolynomial</a></p><ul><li><code><code><a href="DeltaQ-PiecewisePolynomial.html#t:DQ" title="DeltaQ.PiecewisePolynomial">DQ</a></code></code> for a probability distribution with numeric type <code>Rational</code>.
This type represents a mixed discrete / continuous probability distribution
where the continuous part is represented in terms of piecewise polynomials.</li></ul></li><li>common methods for analysis and construction in <a href="DeltaQ-Methods.html">DeltaQ.Methods</a></li><li><p>plotting utilities in <a href="DeltaQ-Plot.html">DeltaQ.Plot</a></p><ul><li><code><a href="DeltaQ-Plot.html#v:plotCDFWithQuantiles" title="DeltaQ.Plot">plotCDFWithQuantiles</a></code> for plotting an instance of <code><a href="DeltaQ-Class.html#t:DeltaQ" title="DeltaQ.Class">DeltaQ</a></code>
with quantiles highlighted.</li></ul></li><li><p>type class instance in <a href="DeltaQ-Expr.html">DeltaQ.Expr</a></p><ul><li><code><code><a href="DeltaQ-Expr.html#t:O" title="DeltaQ.Expr">O</a></code></code> represents an outcome expression, that is a symbolic
  representation of an outcome.</li></ul></li><li>rendering of outcome expressions in <a href="DeltaQ-Diagram.html">DeltaQ.Diagram</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="DeltaQ-Class.html">DeltaQ.Class</a></li><li class="src short">module <a href="DeltaQ-Expr.html">DeltaQ.Expr</a></li><li class="src short">module <a href="DeltaQ-Diagram.html">DeltaQ.Diagram</a></li><li class="src short">module <a href="DeltaQ-Methods.html">DeltaQ.Methods</a></li><li class="src short">module <a href="DeltaQ-Plot.html">DeltaQ.Plot</a></li><li class="src short">module <a href="DeltaQ-PiecewisePolynomial.html">DeltaQ.PiecewisePolynomial</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Example</h1></a><div class="doc"><p>In order to demonstrate the use of this module,
we explore a <strong>real-world example</strong>
which occurred during the design of the Cardano blockchain.</p><p>Problem: We want to design a <strong>computer network</strong>
through which we can send a <strong>message</strong>
from any computer A to any other computer Z.</p><p>However, instead of connecting each pair of computers through a direct
TCP/IP link, we want to save on connection cables
and only connect each computer to a fixed number of other computers;
these computers are called <em>neighbors</em> and
this number is called the <em>node degree</em> <code>d</code> of our network.
A message from computer A to computer Z will
first be sent to one of the <code>d</code> neighbors of A,
then be <strong>relayed</strong> to one of the neighbor's neighbors,
and so on until it reaches Z.
hrough the network.</p><p>How much <strong>time</strong> does it take to send the message
from computer A to computer Z through the network?
How should we choose the parameter <code>d</code> in order to improve this time?
How can we refine the network design in other ways?</p><p>This questions can be answered by using this module.</p><pre>import DeltaQ
</pre><p>We start with an <strong>estimate</strong> based on <strong>measured</strong> transfer times.
Depending on geographic distance and location,
a <strong>direct TCP/IP connection</strong> may delive a message within
different amounts of time.
We distinguish between <code>short</code>, <code>medium</code> and <code>long</code> distance.
For sending a block of 64k bytes of data,
representative times are (in seconds)</p><pre>short, medium, long :: DQ
short  = wait 0.024 -- seconds
medium = wait 0.143 -- seconds
long   = wait 0.531 -- seconds</pre><p>(These are delay times for the data to arrive,
not roundtrip times for the sending computer to receive
an acknowledgment.)</p><p>If we assume that a direct TCP/IP connection between computers has
an equal probability of being <code>short</code>, <code>medium</code>, or <code>long</code>,
the probability distribution of delay times for a <strong>single hop</strong> is</p><pre>hop :: DQ
hop = choices [(1/3, short), (1/3, medium), (1/3, long)]</pre><p>The distribution of delay times for a <strong>sequence of hops</strong> is</p><pre>hops :: Int -&gt; DQ
hops 1 = hop
hops n = hop .&gt;&gt;. hops (n-1)</pre><p>For example, the probability of five hops to succeed within 2 seconds
is</p><pre>&gt; fromRational (successWithin (hops 5) 2) :: Double
0.9547325102880658</pre><p>Besides computing delay times numerically with the type <code><a href="DeltaQ-PiecewisePolynomial.html#t:DQ" title="DeltaQ.PiecewisePolynomial">DQ</a></code>,
we can also represent the underlying model <strong>symbolically</strong>
using the type <code><a href="DeltaQ-Expr.html#t:O" title="DeltaQ.Expr">O</a></code>.
For example, here is a diagram that represents a sequence of three hops:</p><pre>hop' :: O
hop' = choices [(1/3, var &quot;short&quot;), (1/3, var &quot;mid&quot;), (1/3, var &quot;long&quot;)]

hops' :: O
hops' = hop' .&gt;&gt;. hop' .&gt;&gt;. hop'

renderedHops :: Diagram SVG
renderedHops = renderOutcomeDiagram hops'</pre><p><img src="images/hops.svg" /></p></div><a href="#g:2" id="g:2"><h1>Modules</h1></a><div class="top"><p class="src">module <a href="DeltaQ-Class.html">DeltaQ.Class</a></p></div><div class="top"><p class="src">module <a href="DeltaQ-Expr.html">DeltaQ.Expr</a></p></div><div class="top"><p class="src">module <a href="DeltaQ-Diagram.html">DeltaQ.Diagram</a></p></div><div class="top"><p class="src">module <a href="DeltaQ-Methods.html">DeltaQ.Methods</a></p></div><div class="top"><p class="src">module <a href="DeltaQ-Plot.html">DeltaQ.Plot</a></p></div><div class="top"><p class="src">module <a href="DeltaQ-PiecewisePolynomial.html">DeltaQ.PiecewisePolynomial</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.31.1</p></div></body></html>